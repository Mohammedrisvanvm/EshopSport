<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/profile.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="/css/zoomstyle.css" />
  </head>
  <body>
    <header>
      <div class="container-fluid">
        <!-- Navbar -->
        <nav
          class="navbar navbar-expand-lg navbar-dark mt-1 mb-5 shadow p-2"
          style="background-color: #607d8b"
        >
          <!-- Container wrapper -->
          <div class="container-fluid">
            <!-- Navbar brand -->
            <a class="navbar-brand mx-5" href="/"><h3>ESHOP SPORT</h3></a>

            <!-- Toggle button -->
            <button
              class="navbar-toggler text-white"
              type="button"
              data-mdb-toggle="collapse"
              data-mdb-target="#navbarSupportedContent1"
              aria-controls="navbarSupportedContent1"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <i class="fas fa-bars"></i>
            </button>

            <!-- Collapsible wrapper -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent1">
              <ul class="navbar-nav mx-5 me-auto mb-2 mb-lg-0">
                <!-- Link -->
                <li class="nav-item acitve">
                  <a class="nav-link mx-2" href="/"><h5>HOME</h5></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link mx-2" href="/shop"><h5>SHOP NOW</h5></a>
                </li>

                <li class="nav-item">
                  <a class="nav-link mx-2" href="/contactus"
                    ><H5>CONTACT US</H5></a
                  >
                </li>
              </ul>

              <ul class="navbar-nav mb-2 mb-lg-0">
                <li class="nav-item ms-5 fs-3 text-light">
                  <a href="/wishlist" class="text-decoration-none text-light"
                    ><i class="ri-heart-line"></i
                  ></a>
                </li>
                <li class="nav-item mx-5 fs-3">
                  <a href="/cart" class="text-decoration-none text-light d-flex"
                    ><i class="ri-shopping-cart-fill"></i
                  ></a>
                </li>
                <li class="nav-item pt-1">
                  <div class="d-flex">
                    <% if (ifuser) { %>

                    <div class="dropdown">
                      <button
                        class="btn btn-secondary dropdown-toggle"
                        type="button"
                        id="dropdownMenuButton1"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        <i class="ri-user-fill"></i>
                      </button>
                      <ul
                        class="dropdown-menu"
                        aria-labelledby="dropdownMenuButton1"
                      >
                        <li>
                          <a class="dropdown-item" href="#">mohammed </a>
                        </li>
                        <li>
                          <a class="dropdown-item" href="/profile">profile</a>
                        </li>
                        <li>
                          <a class="dropdown-item" href="/orders">orders</a>
                        </li>
                        <li>
                          <a class="dropdown-item" href="/logout"
                            ><button class="btn btn-dark">logout</button></a
                          >
                        </li>
                      </ul>
                    </div>

                    <% } else { %>

                    <a href="/login">
                      <button class="btn btn-dark d-flex">
                        <h5 class="mx-2">LOGIN</h5>
                        <i class="ri-login-box-line fs-5"></i></button
                    ></a>

                    <% } %>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <!-- Container wrapper -->
        </nav>
      </div>
    </header>

    <div class="container mt-5 mb-5">
      <div class="card">
        <div class="row g-0">
          <div class="col-md-6 border-end">
            <div class="d-flex flex-column justify-content-center">
              <div
                class="show"
                href="/image/productImage/<%-productinfo.mainImage[0].filename %>"
                style="z-index: 999"
              >
                <img
                  src="/image/productImage/<%-productinfo.mainImage[0].filename %>"
                  id="show-img"
                />
              </div>
              <div class="small-img">
                <img
                  src="images/next-icon.png"
                  class="icon-left"
                  alt=""
                  id="prev-img"
                />
                <div class="small-container">
                  <div id="small-img-roll">
                    <img
                      src="/image/productImage/<%-productinfo.mainImage[0].filename %>"
                      class="show-small-img"
                      alt=""
                    />
                    <%productinfo.subImages.forEach((i) => { %>

                    <img
                      src="/image/productImage/<%-i.filename %>"
                      class="show-small-img"
                      alt=""
                    />

                    <% }) %>
                  </div>
                </div>
                <img
                  src="images/next-icon.png"
                  class="icon-right"
                  alt=""
                  id="next-img"
                />
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="p-3 right-side">
              <div class="d-flex justify-content-between align-items-center">
                <h3><%-productinfo.productName %></h3>
                <button
                  style="
                    border-radius: 25px;
                    border: 0;
                    background-color: rgb(255, 255, 255);
                  "
                  id="heart"
                  onclick="addtowishlist(`<%-productinfo._id %>`)"
                >
                  <i class="ri-heart-line fs-4"></i>
                </button>
              </div>
              <div class="mb-3">
                <span class="badge bg-dark me-1"
                  ><%-productinfo.category %></span
                >

                <span class="badge bg-info me-1">New</span>

                <span class="badge bg-danger me-1">Bestseller</span>
              </div>
              <div class="mt-2 pr-3 content">
                <p><%-productinfo.description %></p>
              </div>

              <h3>
                <span class="me-1">
                  <del class="text-danger">Rs.<%-productinfo.MRP %></del>
                </span>
                <span>Rs.<%-productinfo.price %></span>
              </h3>

              <div class="ratings d-flex flex-row align-items-center">
                <div class="d-flex flex-row">
                  <i class="bx bxs-star"></i> <i class="bx bxs-star"></i>
                  <i class="bx bxs-star"></i> <i class="bx bxs-star"></i>
                  <i class="bx bx-star"></i>
                </div>
                <% if (productinfo.quantity==0) { %>
                <h2 class="text-danger m-5">Out Of Stock</h2>
                <% } else { %>

                <div class="mt-2 pr-3 content">
                  <% if (productinfo.quantity<5) { %>
                  <span class="text-danger"
                    >only <%-productinfo.quantity%> is left</span
                  >
                  <% } %>
                </div>
                <!-- <span>441 reviews</span> -->
              </div>
              <!-- <div class="mt-5">
                <span class="fw-bold">Color</span>
                <div class="colors">
                  <ul id="marker">
                    <li id="marker-1"></li>
                    <li id="marker-2"></li>
                    <li id="marker-3"></li>
                    <li id="marker-4"></li>
                    <li id="marker-5"></li>
                  </ul>
                </div>
              </div> -->
              <div class="buttons d-flex flex-row mt-5 gap-3">
                <button class="btn btn-outline-dark" onclick="">Buy Now</button>
                <button
                  class="btn btn-dark"
                  onclick="addToCart(`<%-productinfo._id %>`)"
                >
                  Add to cart
                </button>
              </div>
              <!-- <div class="search-option">
                <i class="bx bx-search-alt-2 first-search"></i>
                <div class="inputs"><input type="text" name="" /></div>
                <i class="bx bx-share-alt share"></i>
              </div> -->
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer
      class="text-center text-white mt-4"
      style="background-color: #607d8b"
    >
      <hr class="text-dark" />

      <div class="container" style="height: 50px">
        <!-- Section: Social media -->
        <section class="mb-3">
          <!-- Facebook -->
          <a
            class="btn-link btn-floating btn-lg text-white"
            href="#!"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-facebook-f"></i
          ></a>

          <!-- Twitter -->
          <a
            class="btn-link btn-floating btn-lg text-white"
            href="#!"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-twitter"></i
          ></a>

          <!-- Google -->
          <a
            class="btn-link btn-floating btn-lg text-white"
            href="#!"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-google"></i
          ></a>

          <!-- Instagram -->
          <a
            class="btn-link btn-floating btn-lg text-white"
            href="#!"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-instagram"></i
          ></a>

          <!-- YouTube -->
          <a
            class="btn-link btn-floating btn-lg text-white"
            href="#!"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-youtube"></i
          ></a>
        </section>
      </div>

      <div
        class="text-center p-3"
        style="background-color: rgba(0, 0, 0, 0.2); color: #e0e0e0"
      >
        © 2022 Copyright:
        <a class="text-white" href="https://mdbootstrap.com/">eshopsport.com</a>
      </div>
    </footer>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT"
      crossorigin="anonymous"
    ></script>
    <script src="/js/zoomimage.js"></script>
    <script src="/js/zoommain.js"></script>
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <script>
      function changeImage(element) {
        var main_prodcut_image = document.getElementById("main_product_image");
        main_prodcut_image.src = element.src;
      }
      function addToCart(data) {
        axios.get("/addtocart/" + data);
      }

      function addtowishlist(data) {
        console.log(data, "111111111111");
        axios.get("/addtowishlist/" + data).then((result) => {
          if (result.data.success) {
            let btn = (document.getElementById(
              "heart"
            ).innerHTML = ` <button style="border-radius: 25px; border: 0 ; background-color: pink" id="heart" onclick="deletefromwishlist('<%-productinfo._id %>')">  <i class="ri-heart-line"></i></button>`);
          }
        });
      }
      function deletefromwishlist(data) {
        console.log(data, "111111111111");
        axios.get("/deletefromwishlist/" + data).then((result) => {
          if (result.data.success) {
            let btn = (document.getElementById("heart").innerHTML = `<button
                  style="
                    border-radius: 25px;
                    border: 0;
                    background-color: rgb(255, 255, 255);
                  "
                  id="heart"
                  onclick="addtowishlist('<%-productinfo._id %>')"
                >
                  <i class="ri-heart-line fs-4"></i>
                </button>`);
          }
        });
      }
    </script>

    <script src="https://unpkg.com/js-image-zoom@0.4.1/js-image-zoom.js"></script>
    <script>
      var options = {
        width: 500,
        height: 550,
        zoomWidth: 400,
        offset: { vertical: 0, horizontal: 10 },
        scale: 0.5,
      };

      var img = document.getElementById("image-zoom");
      new ImageZoom(img, options);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
